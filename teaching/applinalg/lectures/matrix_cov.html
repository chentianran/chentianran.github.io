---
layout: ilecture_only
title: Covariance matrices
---

<section class="titlepage">
    <div class="titlebox">
        <h2 class="title">Covariance matrices</h2>
        <p class="small">
            Square matrices capturing covariance
            among random vectors or data.
        </p>
    </div>
    <p>
        Covariance matrices captures covariance
        among variables in data sets
        and they are among the most basic tools used in
        data analysis.
    </p>
    <!-- <p>Tianran Chen</p> -->
    <!-- <p class="footnote2"> -->
    <!-- Department of Mathematics<br> -->
    <!-- Auburn University at Montgomery -->
    <!-- </p> -->
</section>
<section>
    <h3>Stats preparations: sample variance</h3>
    <p>
        In statistics and data science,
        <em>variance</em> measures how far a set of values
        is spread out from their mean value.
    </p>
    <div class="cols fragment">
        <div class="col">
            <table>
                <tbody>
                    <tr><td>8</td></tr>
                    <tr><td>9</td></tr>
                    <tr><td>11</td></tr>
                    <tr><td>13</td></tr>
                    <tr><td>9</td></tr>
                </tbody>
            </table>
            Mean value is 10,
            and the variance is small.
        </div>
        <div class="col">
            <table>
                <tr><td>1</td></tr>
                <tr><td>2</td></tr>
                <tr><td>0</td></tr>
                <tr><td>20</td></tr>
                <tr><td>27</td></tr>
            </table>
            Mean value is also 10,
            but the variance is large.
        </div>
    </div>
</section>
<section>
    <h3>Covariance</h3>
    <p>
        In statistics, <em>covariance</em> is a generalization of variance
        to a pair of random variables.
        It measures their joint variability.
    </p>
    <p class="fragment">
        Here, we focus on the "sample" covariance,
        i.e., the covariance we can compute from a finite number of samples.
    </p>
    <p class="fragment">
        Suppose, for a pair of variables $X$ and $Y$,
        we have $n$ samples
        \[
            (x_1,y_1), \ldots, (x_n,y_n),
        \]
        the (unbiased) covariance is
        \[
            \frac{1}{n-1} \sum_{i=1}^n (x_i - \overline{x}) (y_i - \overline{y})
        \]
        where $\overline{x}$ and $\overline{y}$
        are the sample means of $x$'s and $y$'s.
    </p>
</section>
<section>
    <h3>Covariance matrix (column samples)</h3>
    <p>
        Suppose $X$ is a matrix that capture some sample data,
        in which rows represent different variables,
        and columns represent different samples.
        <!-- <span class="fragment">
            we also assume the matrix has 0 row mean
            (i.e., the mean value of each row is 0).
        </span>
        <span class="fragment lowlight">
            Such matrices are called "centered" data matrix.
        </span> -->
    </p>
    <div class="definition fragment">
        The <b class="highlight">sample covariance matrix</b>
        is
        \[
            Q_{XX} = \frac{1}{n-1} (X - \overline{X}) (X-\overline{X})^\top
        \]
        where $n$ is the number of columns in $X$,
        and $\overline{X}$ is a matrix of the same size as $X$
        that contains the mean row values of $X$.
    </div>
</section>
<section>
    <h3>Covariance matrix (row samples)</h3>
    <p>
        Similarly, suppose $X$ is a matrix that capture some sample data,
        in which columns represent different variables,
        and rows represent different samples.
        <!-- <span class="fragment">
            we also assume the matrix has 0 row mean
            (i.e., the mean value of each row is 0).
        </span>
        <span class="fragment lowlight">
            Such matrices are called "centered" data matrix.
        </span> -->
    </p>
    <div class="definition fragment">
        The <b class="highlight">sample covariance matrix</b>
        is
        \[
            Q_{XX} = \frac{1}{n-1} (X - \overline{X})^\top (X-\overline{X})
        \]
        where $n$ is the number of columns in $X$,
        and $\overline{X}$ is a matrix of the same size as $X$
        that contains the mean column values of $X$.
    </div>
</section>
<section>
    <h3>Red wine quality data</h3>
    <table class="table table-bordered table-hover table-condensed">
        <thead>
            <tr>
                <th align="right" title="Field #1">Fixed acidity</th>
                <th align="right" title="Field #2">Volatile acidity</th>
                <th align="right" title="Field #3">Citric acid</th>
                <th align="right" title="Field #4">Residual sugar</th>
                <th align="right" title="Field #5">Chlorides</th>
        </tr></thead>
        <tbody>
            <tr>
            <td align="right">7.4</td>
            <td align="right">0.7</td>
            <td align="right">0.0</td>
            <td align="right">1.9</td>
            <td align="right">0.076</td>
        </tr>
        <tr>
            <td align="right">7.8</td>
            <td align="right">0.88</td>
            <td align="right">0.0</td>
            <td align="right">2.6</td>
            <td align="right">0.098</td>
        </tr>
        <tr>
            <td align="right">7.8</td>
            <td align="right">0.76</td>
            <td align="right">0.04</td>
            <td align="right">2.3</td>
            <td align="right">0.092</td>
        </tr>
        <tr>
            <td align="right">11.2</td>
            <td align="right">0.28</td>
            <td align="right">0.56</td>
            <td align="right">1.9</td>
            <td align="right">0.075</td>
        </tr>
        <tr>
            <td align="right">7.4</td>
            <td align="right">0.7</td>
            <td align="right">0.0</td>
            <td align="right">1.9</td>
            <td align="right">0.076</td>
        </tr>
        <tr>
            <td align="right">7.4</td>
            <td align="right">0.66</td>
            <td align="right">0.0</td>
            <td align="right">1.8</td>
            <td align="right">0.075</td>
        </tr>
        <tr>
            <td align="right">7.9</td>
            <td align="right">0.6</td>
            <td align="right">0.06</td>
            <td align="right">1.6</td>
            <td align="right">0.069</td>
        </tr>
        <tr>
            <td align="right">7.3</td>
            <td align="right">0.65</td>
            <td align="right">0.0</td>
            <td align="right">1.2</td>
            <td align="right">0.065</td>
        </tr>
        </tbody>
    </table>
    <p class="smaller">
        This is a very large data set from
        <em>UCI machine learning repository</em>,
        we are only showing 5 variables and a few rows as examples,
        and consequently covariance calculation is rather meaningless.
    </p>
</section>

